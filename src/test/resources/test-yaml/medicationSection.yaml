---
testName: "MedicationSectionTest"
testCase:
  eCR-MedicationRequest:
    testData:
      ClientDataToBeSaved: "R4/Misc/ClientDetails/ClientDataEntry1.json"
      SystemLaunchPayload: "R4/Misc/SystemLaunchPayload/systemLaunchRequest.json"
      BaseXPath: "/ClinicalDocument/component/structuredBody/component[4]/section/"
    resourceMappingData:
      Patient:
      - params: "12742571"
        responseFilePath: "R4/Patient/Patient_12742571.json"
      Encounter:
      - params: "97953900"
        responseFilePath: "R4/Encounter/Encounter_withOneParticipant.json"
      Practitioner:
      - params: "11817978"
        responseFilePath: "R4/Practitioner/Practitioner_11817978.json"
      Organization:
      - params: "675844"
        responseFilePath: "R4/Organization/Organization.json"
      Condition:
      - params:
          patient: "12742571"
        responseFilePath: "R4/Condition/ConditionBundle_d2572364249.json"
      MedicationRequest:
      - params:
          patient: "12742571"
        responseFilePath: "R4/Medication/MedicationRequest.json"
    otherMappingData:
      metadata: "R4/Misc/MetaData_r4.json"
      token: "R4/Misc/AccessToken.json"
      default: "R4/Misc/NoDataFound_Default.json"
    validate:
    - xPath: ""
      'templateId[1]/@root': "2.16.840.1.113883.10.20.22.2.38"
      'templateId[2]/@root': "2.16.840.1.113883.10.20.22.2.38"
      'templateId[2]/@extension': "2014-06-09"
      'code/@code': "29549-3"
      'code/@codeSystem': "2.16.840.1.113883.6.1"
      'code/@codeSystemName': "LOINC"
      'code/@displayName': "Medications Administered"
      'title': "Medications Administered"
    - xPath: "text/table/thead/tr/th"
      count: 2
    - xPath: "text/table/tbody/tr"
      count: 6
    - xPath: "text/table/tbody/tr[1]/td"
      count: 2
    - xPath: "text/table/"
      'thead/tr/th[1]': "Medication Name"
      'thead/tr/th[2]': "Medication Start Date"
      'tbody/tr[1]/td[1]/content': "LORazepam"
#      'tbody/tr[1]/td[2]/content': "20200429190400"
      'tbody/tr[2]/td[1]/content': "albuterol"
#      'tbody/tr[2]/td[2]/content': "20200429190200"
      'tbody/tr[3]/td[1]/content': "cefepime 1000 MG Injection"
#      'tbody/tr[3]/td[2]/content': "20200429193000"
      'tbody/tr[4]/td[1]/content': "cetirizine-pseudoephedrine (ZyrTEC-D 5 mg-120 mg oral tablet, extended release)"
#      'tbody/tr[4]/td[2]/content': "20200428235700"
      'tbody/tr[5]/td[1]/content': "citalopram (citalopram 20 mg oral tablet)"
#      'tbody/tr[5]/td[2]/content': "20200428235700"
      'tbody/tr[6]/td[1]/content': "norgestimate-ethinyl estradiol (Ortho Tri-Cyclen oral tablet)"
#      'tbody/tr[6]/td[2]/content': "20200428235800"
    - xPath: "entry"
      count: 6
    - xPath: "entry[1]/"
      '@typeCode': "DRIV"
    - xPath: "entry[1]/substanceAdministration/templateId"
      count: 2
    - xPath: "entry[1]/substanceAdministration/id"
      count: 1
    - xPath: "entry[1]/substanceAdministration/effectiveTime"
      count: 2
    - xPath: "entry[1]/substanceAdministration/"
      '@classCode': "SBADM"
      '@moodCode': "INT"
      'templateId[1]/@root': "2.16.840.1.113883.10.20.22.4.16"
      'templateId[2]/@root': "2.16.840.1.113883.10.20.22.4.16"
      'templateId[2]/@extension': "2014-06-09"
      'id/@root': "2.16.840.1.113883.1.1.1.1"
#      'id/@extension': "311503471"
      'statusCode/@code': "active"
#      'effectiveTime[1]/@value': "20200429190400"
      'effectiveTime[2]/@type': "PIVL_TS"
      'effectiveTime[2]/@institutionSpecified': "true"
      'effectiveTime[2]/@operator': "A"
      'effectiveTime[2]/period/@value': "0"
      'effectiveTime[2]/period/@unit': "h"
      'doseQuantity/@value': "7.03"
      'doseQuantity/@unit': "mg"
    - xPath: "entry[1]/substanceAdministration/consumable/manufacturedProduct/templateId"
      count: 2
    - xPath: "entry[1]/substanceAdministration/consumable/manufacturedProduct/id"
      count: 1
    - xPath: "entry[1]/substanceAdministration/consumable/manufacturedProduct/"
      '@classCode': "MANU"
      'templateId[1]/@root': "2.16.840.1.113883.10.20.22.4.23"
      'templateId[2]/@root': "2.16.840.1.113883.10.20.22.4.23"
      'templateId[2]/@extension': "2014-06-09"
#      'id/@root': "2.16.840.1.113883.1.1.1.1"
#      'id/@extension': "311503471"
      'manufacturedMaterial/code/@code': "6470"
      'manufacturedMaterial/code/@codeSystem': "2.16.840.1.113883.6.88"
      'manufacturedMaterial/code/@codeSystemName': "rxnorm"
      'manufacturedMaterial/code/@displayName': "Lorazepam"
    - xPath: "entry[2]/"
      '@typeCode': "DRIV"
    - xPath: "entry[2]/substanceAdministration/templateId"
      count: 2
    - xPath: "entry[2]/substanceAdministration/id"
      count: 1
    - xPath: "entry[2]/substanceAdministration/effectiveTime"
      count: 2
    - xPath: "entry[2]/substanceAdministration/"
      '@classCode': "SBADM"
      '@moodCode': "INT"
      'templateId[1]/@root': "2.16.840.1.113883.10.20.22.4.16"
      'templateId[2]/@root': "2.16.840.1.113883.10.20.22.4.16"
      'templateId[2]/@extension': "2014-06-09"
      'id/@root': "2.16.840.1.113883.1.1.1.1"
#      'id/@extension': "311503467"
      'statusCode/@code': "active"
#      'effectiveTime[1]/@value': "20200429190200"
      'effectiveTime[2]/@type': "PIVL_TS"
      'effectiveTime[2]/@institutionSpecified': "true"
      'effectiveTime[2]/@operator': "A"
      'effectiveTime[2]/period/@value': "0"
      'effectiveTime[2]/period/@unit': "h"
      'doseQuantity/@value': "1.25"
      'doseQuantity/@unit': "mg"
    - xPath: "entry[2]/substanceAdministration/consumable/manufacturedProduct/templateId"
      count: 2
    - xPath: "entry[2]/substanceAdministration/consumable/manufacturedProduct/id"
      count: 1
    - xPath: "entry[2]/substanceAdministration/consumable/manufacturedProduct/"
      '@classCode': "MANU"
      'templateId[1]/@root': "2.16.840.1.113883.10.20.22.4.23"
      'templateId[2]/@root': "2.16.840.1.113883.10.20.22.4.23"
      'templateId[2]/@extension': "2014-06-09"
#      'id/@root': "2.16.840.1.113883.1.1.1.1"
#      'id/@extension': "311503467"
      'manufacturedMaterial/code/@code': "435"
      'manufacturedMaterial/code/@codeSystem': "2.16.840.1.113883.6.88"
      'manufacturedMaterial/code/@codeSystemName': "rxnorm"
      'manufacturedMaterial/code/@displayName': "Albuterol"
    - xPath: "entry[3]/substanceAdministration/"
      'statusCode/@code': "active"
#      'effectiveTime[1]/@value': "20200429190200"
      'effectiveTime[2]/@type': "PIVL_TS"
      'effectiveTime[2]/@institutionSpecified': "true"
      'effectiveTime[2]/@operator': "A"
      'effectiveTime[2]/period/@value': "0"
      'effectiveTime[2]/period/@unit': "h"
      'doseQuantity/@value': "100.0"
      'doseQuantity/@unit': "mL"
    - xPath: "entry[3]/substanceAdministration/consumable/manufacturedProduct/manufacturedMaterial/"
      'code/@code': "1665093"
      'code/@codeSystem': "2.16.840.1.113883.6.88"
      'code/@codeSystemName': "rxnorm"
      'code/@displayName': "cefepime 1000 MG Injection"
    - xPath: "entry[4]/substanceAdministration/"
      'statusCode/@code': "active"
#      'effectiveTime[1]/@value': "20200429190200"
      'effectiveTime[2]/@type': "PIVL_TS"
      'effectiveTime[2]/@institutionSpecified': "true"
      'effectiveTime[2]/@operator': "A"
      'effectiveTime[2]/period/@value': "0"
      'effectiveTime[2]/period/@unit': "h"
      'doseQuantity/@value': "1.0"
      'doseQuantity/@unit': "tab"
    - xPath: "entry[4]/substanceAdministration/consumable/manufacturedProduct/manufacturedMaterial/"
      'code/@code': "1014583"
      'code/@codeSystem': "2.16.840.1.113883.6.88"
      'code/@codeSystemName': "rxnorm"
      'code/@displayName': "12 HR cetirizine hydrochloride 5 MG / Pseudoephedrine Hydrochloride 120 MG Extended Release Tablet [Zyrtec-D]"
    - xPath: "entry[5]/substanceAdministration/"
      'statusCode/@code': "active"
#      'effectiveTime[1]/@value': "20200429190200"
      'effectiveTime[2]/@type': "PIVL_TS"
      'effectiveTime[2]/@institutionSpecified': "true"
      'effectiveTime[2]/@operator': "A"
      'effectiveTime[2]/period/@value': "0"
      'effectiveTime[2]/period/@unit': "h"
      'doseQuantity/@value': "1.0"
      'doseQuantity/@unit': "tab"
    - xPath: "entry[5]/substanceAdministration/consumable/manufacturedProduct/manufacturedMaterial/"
      'code/@code': "200371"
      'code/@codeSystem': "2.16.840.1.113883.6.88"
      'code/@codeSystemName': "rxnorm"
      'code/@displayName': "Citalopram 20 MG Oral Tablet"
    - xPath: "entry[6]/substanceAdministration/"
      'statusCode/@code': "active"
#      'effectiveTime[1]/@value': "20200429190200"
      'effectiveTime[2]/@type': "PIVL_TS"
      'effectiveTime[2]/@institutionSpecified': "true"
      'effectiveTime[2]/@operator': "A"
      'effectiveTime[2]/period/@value': "0"
      'effectiveTime[2]/period/@unit': "h"
      'doseQuantity/@value': "1.0"
      'doseQuantity/@unit': "tab"
    - xPath: "entry[6]/substanceAdministration/consumable/manufacturedProduct/manufacturedMaterial/"
      'code/@code': "749785"
      'code/@codeSystem': "2.16.840.1.113883.6.88"
      'code/@codeSystemName': "rxnorm"
      'code/@displayName': "{7 (Ethinyl Estradiol 0.035 MG / norgestimate 0.18 MG Oral Tablet) / 7 (Ethinyl Estradiol 0.035 MG / norgestimate 0.215 MG Oral Tablet) / 7 (Ethinyl Estradiol 0.035 MG / norgestimate 0.25 MG Oral Tablet) / 7 (Inert Ingredients 1 MG Oral Tablet) } Pack [Or"
  eCR-MedicationRequest-Empty:
    testData:
      ClientDataToBeSaved: "R4/Misc/ClientDetails/ClientDataEntry1.json"
      SystemLaunchPayload: "R4/Misc/SystemLaunchPayload/systemLaunchRequest.json"
      BaseXPath: "/ClinicalDocument/component/structuredBody/component[4]/section/"
    resourceMappingData:
      Patient:
      - params: "12742571"
        responseFilePath: "R4/Patient/Patient_12742571.json"
      Encounter:
      - params: "97953900"
        responseFilePath: "R4/Encounter/Encounter_withOneParticipant.json"
      Practitioner:
      - params: "11817978"
        responseFilePath: "R4/Practitioner/Practitioner_11817978.json"
      Organization:
      - params: "675844"
        responseFilePath: "R4/Organization/Organization.json"
      Condition:
      - params:
          patient: "12742571"
        responseFilePath: "R4/Condition/ConditionBundle_d2572364249.json"
    otherMappingData:
      metadata: "R4/Misc/MetaData_r4.json"
      token: "R4/Misc/AccessToken.json"
      default: "R4/Misc/NoDataFound_Default.json"
    validate:
    - xPath: ""
      '@nullFlavor': "NI"
      'templateId[1]/@root': "2.16.840.1.113883.10.20.22.2.38"
      'templateId[2]/@root': "2.16.840.1.113883.10.20.22.2.38"
      'templateId[2]/@extension': "2014-06-09"
      'code/@code': "29549-3"
      'code/@codeSystem': "2.16.840.1.113883.6.1"
      'code/@codeSystemName': "LOINC"
      'code/@displayName': "Medications Administered"
      'title': "Medications Administered"
      'text': "No Medication Administered Information"